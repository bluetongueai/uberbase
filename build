#! /bin/bash

source .env

docker compose build

docker build \
  --build-arg="UBERBASE_DOMAIN=$UBERBASE_DOMAIN" \
  --build-arg="UBERBASE_ADMIN_USERNAME=$UBERBASE_ADMIN_USERNAME" \
  --build-arg="UBERBASE_ADMIN_EMAIL=$UBERBASE_ADMIN_EMAIL" \
  --build-arg="UBERBASE_ADMIN_PASSWORD=$UBERBASE_ADMIN_PASSWORD" \
  --build-arg="UBERBASE_CADDY_STORAGE=$UBERBASE_CADDY_STORAGE" \
  --build-arg="UBERBASE_REDIS_HOST=$UBERBASE_REDIS_HOST" \
  --build-arg="UBERBASE_REDIS_PORT=$UBERBASE_REDIS_PORT" \
  --build-arg="UBERBASE_REDIS_SECRET=$UBERBASE_REDIS_SECRET" \
  --build-arg="UBERBASE_REDIS_STORAGE=$UBERBASE_REDIS_STORAGE" \
  --build-arg="UBERBASE_POSTGRES_HOST=$UBERBASE_POSTGRES_HOST" \
  --build-arg="UBERBASE_POSTGRES_DATABASE=$UBERBASE_POSTGRES_DATABASE" \
  --build-arg="UBERBASE_POSTGRES_USER=$UBERBASE_POSTGRES_USER" \
  --build-arg="UBERBASE_POSTGRES_PASSWORD=$UBERBASE_POSTGRES_PASSWORD" \
  --build-arg="UBERBASE_POSTGRES_PORT=$UBERBASE_POSTGRES_PORT" \
  --build-arg="UBERBASE_POSTGRES_STORAGE=$UBERBASE_POSTGRES_STORAGE" \
  --build-arg="UBERBASE_POSTGREST_VERSION=$UBERBASE_POSTGRES_VERSION" \
  --build-arg="UBERBASE_POSTGREST_JWT_SECRET=$UBERBASE_POSTGRES_JWT_SECRET" \
  --build-arg="UBERBASE_POSTGREST_PORT=$UBERBASE_POSTGREST_PORT" \
  --build-arg="UBERBASE_MINIO_HOST=$UBERBASE_MINIO_HOST" \
  --build-arg="UBERBASE_MINIO_PORT=$UBERBASE_MINIO_PORT" \
  --build-arg="UBERBASE_MINIO_CONSOLE_PORT=$UBERBASE_MINIO_CONSOLE_PORT" \
  --build-arg="UBERBASE_MINIO_STORAGE=$UBERBASE_MINIO_STORAGE" \
  --build-arg="UBERBASE_MINIO_ROOT_USER=$UBERBASE_MINIO_ROOT_USER" \
  --build-arg="UBERBASE_MINIO_ROOT_PASSWORD=$UBERBASE_MINIO_ROOT_PASSWORD" \
  --build-arg="UBERBASE_LOGTO_HOST=$UBERBASE_LOGTO_HOST" \
  --build-arg="UBERBASE_LOGTO_PUBLIC_PORT=$UBERBASE_LOGTO_PUBLIC_PORT" \
  --build-arg="UBERBASE_LOGTO_ADMIN_PORT=$UBERBASE_LOGTO_ADMIN_PORT" \
  --build-arg="UBERBASE_LOGTO_DATABASE=$UBERBASE_LOGTO_DATABASE" \
  --build-arg="UBERBASE_LOGTO_ENDPOINT=$UBERBASE_LOGTO_ENDPOINT" \
  --build-arg="UBERBASE_LOGTO_ADMIN_ENDPOINT=$UBERBASE_LOGTO_ADMIN_ENDPOINT" \
  --build-arg="UBERBASE_FUNCTIONS_PORT=$UBERBASE_FUNCTIONS_PORT" \
  --build-arg="UBERBASE_FUNCTIONS_IMAGE_PATH=$UBERBASE_FUNCTIONS_IMAGE_PATH" \
  -t bluetongueai/uberbase:latest \
  .
