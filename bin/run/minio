#! /bin/bash

podman run \
    -d \
    --user 0 \
    --restart unless-stopped \
    --name minio \
    --env-file ${UBERBASE_VAULT_STORAGE}/credentials \
    --env VAULT_ADDR=http://${UBERBASE_VAULT_HOST}:${UBERBASE_VAULT_PORT} \
    --env MINIO_ROOT_USER=${UBERBASE_MINIO_ROOT_USER} \
    --env MINIO_ROOT_PASSWORD=${UBERBASE_MINIO_ROOT_PASSWORD} \
    -v ${UBERBASE_MINIO_STORAGE}:/data:Z \
    -v ${PWD}/logs:/var/log/minio:Z \
    -p ${UBERBASE_MINIO_PORT}:9000 \
    -p ${UBERBASE_MINIO_CONSOLE_PORT}:9001 \
    localhost:5000/uberbase-minio:latest \
    minio server /data --address "0.0.0.0:9000" --console-address "0.0.0.0:9001"




