#!/bin/bash

ARCH="$(uname -m)"
FIRECRACKER_API_SOCKET="/run/firecracker.socket"

# dynamically configure services
./bin/configure

# start uberbase
# docker-compose up -d 

echo "Starting containerd"
tmux new -d -s uberbase-containerd "containerd --config /etc/containerd/config-dev.toml"

echo "Starting Firecracker"
rm -f $API_SOCKET
tmux new -d -s uberbase-firecracker "firecracker --api-sock ${API_SOCKET}"

